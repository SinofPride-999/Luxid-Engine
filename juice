#!/usr/bin/env php
<?php
// juice - Luxid CLI Tool

// Check PHP version
if (version_compare(PHP_VERSION, '8.0.0') < 0) {
    echo "âŒ Luxid requires PHP 8.0.0 or higher. You have " . PHP_VERSION . PHP_EOL;
    exit(1);
}

// Get project root (where the CLI is being executed from, not where engine is installed)
$projectRoot = getcwd();

// Add Composer autoloader
$autoloadFile = $projectRoot . '/vendor/autoload.php';
if (!file_exists($autoloadFile)) {
    echo "âŒ Composer autoloader not found. Run: composer install" . PHP_EOL;
    exit(1);
}

require_once $autoloadFile;

// Run the CLI application
try {
    $app = new \Luxid\Console\Application();
    exit($app->run());
} catch (\Throwable $e) {
    echo "âŒ Error: " . $e->getMessage() . PHP_EOL;
    echo "ðŸ“‹ Stack trace:" . PHP_EOL;
    echo $e->getTraceAsString() . PHP_EOL;
    exit(1);
}
